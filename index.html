<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>üí¢ Gzbriel_23 - Profile </title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Favicon circular con tu foto de perfil -->
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3CclipPath id='circle'%3E%3Ccircle cx='50' cy='50' r='50'/%3E%3C/clipPath%3E%3C/defs%3E%3Cimage href='https://i.ibb.co/ym5sb7Gf/610546319-17908281744303935-6673712013085160646-n.jpg' width='100' height='100' clip-path='url(%23circle)'/%3E%3C/svg%3E">

<style>
:root {
  --primary: #ff0033;
  --primary-light: #ff4d6d;
  --bg-dark: #06060a;
  --bg-card: rgba(20, 20, 30, 0.85);
  --text-light: #bbb;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Segoe UI', system-ui, sans-serif;
}

body {
  height: 100vh;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-dark);
  color: #fff;
}

/* ===== PANTALLA DE CARGA ===== */
#loaderScreen {
  position: fixed;
  inset: 0;
  background: linear-gradient(135deg, #0a0a14 0%, #151525 50%, #0a0a14 100%);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  transition: opacity 0.8s ease, visibility 0.8s ease;
}

.loader-content {
  text-align: center;
  padding: 30px;
}

.loader-spinner {
  width: 70px;
  height: 70px;
  margin: 0 auto 20px;
  position: relative;
}

.spinner-circle {
  width: 100%;
  height: 100%;
  border: 3px solid transparent;
  border-top: 3px solid var(--primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.spinner-circle::after {
  content: '';
  position: absolute;
  top: 5px;
  left: 5px;
  right: 5px;
  bottom: 5px;
  border: 3px solid transparent;
  border-top: 3px solid var(--primary-light);
  border-radius: 50%;
  animation: spin 1.5s linear infinite reverse;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.loader-title {
  font-size: 1.8rem;
  font-weight: 700;
  margin-bottom: 10px;
  background: linear-gradient(45deg, #fff, var(--primary-light));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.loader-subtitle {
  color: var(--text-light);
  margin-bottom: 25px;
  font-size: 0.9rem;
}

.loader-progress {
  width: 200px;
  height: 4px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  overflow: hidden;
  margin: 0 auto;
}

.loader-progress-bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--primary), var(--primary-light));
  border-radius: 2px;
  transition: width 0.3s ease;
}

.loader-percentage {
  margin-top: 15px;
  font-size: 1rem;
  color: var(--primary-light);
  font-weight: 600;
}

/* ===== BACKGROUND ===== */
canvas {
  position: fixed;
  inset: 0;
  z-index: 0;
}

/* ===== MAIN CARD ===== */
.main {
  position: relative;
  z-index: 2;
  width: 90%;
  max-width: 340px;
  padding: 28px;
  border-radius: 22px;
  background: var(--bg-card);
  backdrop-filter: blur(18px);
  box-shadow: 
    0 0 60px rgba(255, 0, 60, 0.45),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  text-align: center;
  opacity: 0;
  transform: translateY(40px) scale(0.95);
  transition: all 1.2s ease;
}

.main.show {
  opacity: 1;
  transform: translateY(0) scale(1);
}

/* ===== PROFILE ===== */
.avatar {
  width: 130px;
  height: 130px;
  border-radius: 50%;
  margin: 0 auto 20px;
  overflow: hidden;
  border: 3px solid #fff;
  box-shadow: 0 0 35px var(--primary);
  animation: float 4s ease-in-out infinite;
  position: relative;
}

.avatar::before {
  content: '';
  position: absolute;
  inset: -2px;
  background: linear-gradient(45deg, var(--primary), #00f3ff, var(--primary));
  border-radius: 50%;
  z-index: -1;
  animation: rotate 3s linear infinite;
}

.avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

@keyframes rotate {
  100% { transform: rotate(360deg); }
}

/* ===== STATS ===== */
.stats {
  display: flex;
  justify-content: center;
  gap: 18px;
  margin: 16px 0 24px;
}

.stat {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 18px;
  border-radius: 14px;
  background: rgba(0, 0, 0, 0.55);
  box-shadow: 0 0 15px rgba(255, 0, 60, 0.6);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  user-select: none;
  min-width: 80px;
  justify-content: center;
}

.stat:hover {
  transform: translateY(-3px);
  box-shadow: 0 0 25px rgba(255, 0, 60, 0.8);
}

.stat .material-icons {
  font-size: 20px;
}

.stat.online {
  background: rgba(0, 200, 83, 0.2);
  border: 1px solid rgba(0, 200, 83, 0.5);
}

.stat.online .material-icons {
  color: #00C853;
}

.stat.views .material-icons {
  color: var(--primary-light);
}

h1 {
  margin: 10px 0 4px;
  font-size: 24px;
  font-weight: 700;
  background: linear-gradient(45deg, #fff, var(--primary-light));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

p {
  margin: 0 0 24px;
  color: var(--text-light);
  font-size: 14px;
  line-height: 1.4;
}

/* ===== BUTTONS ===== */
.btn {
  width: 100%;
  padding: 16px;
  margin: 12px 0;
  border: none;
  border-radius: 16px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  color: #fff;
  position: relative;
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  letter-spacing: 0.5px;
}

.btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.35), transparent);
  transform: translateX(-100%);
  transition: transform 1.2s;
}

.btn:hover::before {
  animation: shine 1.2s;
}

.btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.6);
}

.btn:active {
  transform: translateY(-1px);
}

@keyframes shine {
  to { transform: translateX(100%); }
}

.discord {
  background: linear-gradient(135deg, #5865f2, #404eed);
}

.instagram {
  background: linear-gradient(135deg, #833ab4, #fd1d1d, #f77737);
}

.tiktok {
  background: linear-gradient(135deg, #000, #333);
}

.script {
  background: linear-gradient(135deg, var(--primary), #7a0018);
}

/* ===== MUSIC BUTTON Y CONTROLES ===== */
#musicBtn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 55px;
  height: 55px;
  border-radius: 50%;
  border: none;
  background: var(--primary);
  color: #fff;
  cursor: pointer;
  box-shadow: 0 0 25px var(--primary);
  z-index: 5;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

#musicBtn:hover {
  transform: scale(1.1);
  box-shadow: 0 0 35px var(--primary-light);
}

#musicBtn.playing {
  animation: pulse 1.5s infinite;
}

@keyframes pulse {
  0%, 100% { box-shadow: 0 0 25px var(--primary); }
  50% { box-shadow: 0 0 40px var(--primary-light); }
}

/* ===== CONTROLES DE M√öSICA ===== */
.music-controls {
  position: fixed;
  bottom: 85px;
  right: 20px;
  background: rgba(20, 20, 30, 0.9);
  backdrop-filter: blur(10px);
  border-radius: 15px;
  padding: 15px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(255, 0, 60, 0.3);
  z-index: 4;
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-width: 200px;
  transform: translateY(20px);
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.music-controls.show {
  transform: translateY(0);
  opacity: 1;
  visibility: visible;
}

.volume-container {
  display: flex;
  align-items: center;
  gap: 10px;
}

.volume-slider {
  flex: 1;
  height: 4px;
  -webkit-appearance: none;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 2px;
  outline: none;
}

.volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: var(--primary);
  cursor: pointer;
  box-shadow: 0 0 5px var(--primary);
}

.volume-slider::-moz-range-thumb {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: var(--primary);
  cursor: pointer;
  border: none;
}

.volume-icon {
  color: var(--primary);
  font-size: 20px;
}

.song-info {
  font-size: 12px;
  color: var(--text-light);
  text-align: center;
  padding-top: 5px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

/* ===== NOTIFICATION ===== */
.notification {
  position: fixed;
  top: 20px;
  right: 20px;
  background: rgba(20, 20, 30, 0.95);
  color: white;
  padding: 12px 20px;
  border-radius: 10px;
  border-left: 4px solid var(--primary);
  backdrop-filter: blur(10px);
  z-index: 10000;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  max-width: 300px;
  font-size: 14px;
  transform: translateX(120%);
  transition: transform 0.3s ease;
  display: flex;
  align-items: center;
  gap: 10px;
}

.notification.show {
  transform: translateX(0);
}

.notification.success {
  border-left-color: #4CAF50;
}

.notification.error {
  border-left-color: #f44336;
}

.notification.info {
  border-left-color: #2196F3;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
  .music-controls {
    bottom: 80px;
    right: 10px;
    left: 10px;
    min-width: auto;
  }
}

@media (max-width: 480px) {
  .main {
    padding: 20px;
    margin: 20px;
  }
  
  .loader-content {
    padding: 20px;
  }
  
  .loader-title {
    font-size: 1.5rem;
  }
  
  .stats {
    gap: 12px;
  }
  
  .stat {
    padding: 8px 14px;
    min-width: 70px;
  }
  
  .btn {
    padding: 14px;
  }
  
  #musicBtn {
    width: 50px;
    height: 50px;
    bottom: 15px;
    right: 15px;
  }
  
  .music-controls {
    bottom: 70px;
    right: 10px;
    left: 10px;
  }
  
  .notification {
    right: 10px;
    left: 10px;
    max-width: none;
  }
}

@media (max-width: 360px) {
  .stats {
    flex-direction: column;
    align-items: center;
  }
  
  .stat {
    width: 100%;
    max-width: 180px;
  }
}
</style>
</head>
<body>

<!-- Pantalla de carga -->
<div id="loaderScreen">
  <div class="loader-content">
    <div class="loader-spinner">
      <div class="spinner-circle"></div>
    </div>
    <h2 class="loader-title">Cargando Perfil</h2>
    <p class="loader-subtitle">Conectando con Discord...</p>
    
    <div class="loader-progress">
      <div class="loader-progress-bar" id="progressBar"></div>
    </div>
    
    <div class="loader-percentage" id="percentage">0%</div>
  </div>
</div>

<!-- Canvas para part√≠culas -->
<canvas id="bg"></canvas>

<!-- Audio Player con m√∫sica de YouTube -->
<audio id="backgroundMusic" loop preload="auto">
  <source src="https://files.catbox.moe/5c6g74.mp3">
  <!-- Backup alternativo -->
  <source src="https://files.catbox.moe/5c6g74.mp3">
</audio>

<!-- Controles de m√∫sica -->
<div class="music-controls" id="musicControls">
  <div class="volume-container">
    <span class="material-icons volume-icon">volume_up</span>
    <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50">
  </div>
  <div class="song-info">
    <span id="currentSong">ONEFOUR & Nemzzz - SPINNIN</span>
  </div>
</div>

<!-- Bot√≥n de m√∫sica -->
<button id="musicBtn" aria-label="Toggle music">
  <span class="material-icons">music_note</span>
</button>

<!-- Tarjeta principal -->
<div class="main" id="main">
  <div class="avatar">
    <img src="https://i.ibb.co/ym5sb7Gf/610546319-17908281744303935-6673712013085160646-n.jpg" alt="Profile Picture" loading="lazy">
  </div>
  
  <div class="stats">
    <div class="stat online" id="discordOnline">
      <span class="material-icons">group</span>
      <span id="onlineCount">0</span>
    </div>
    <div class="stat views" id="viewStat">
      <span class="material-icons">visibility</span>
      <span id="viewCount">0</span>
    </div>
  </div>
  
  <h1>üëπ Gzbriel_23</h1>
  <p>Pensando en tu culo ü§∑‚Äç‚ôÇÔ∏è</p>
  
  <button class="btn discord" id="discordBtn" aria-label="Join Discord">
    <span class="material-icons" aria-hidden="true">diversity_3</span>
    Join Discord
  </button>
  
  <button class="btn instagram" id="instagramBtn" aria-label="Follow on Instagram">
    <span class="material-icons" aria-hidden="true">camera_alt</span>
    Follow me IG
  </button>
  
  <button class="btn tiktok" id="tiktokBtn" aria-label="Follow on TikTok">
    <span class="material-icons" aria-hidden="true">video_library</span>
    Follow me TikTok
  </button>
  
  <button class="btn script" id="scriptBtn" aria-label="Copy script">
    <span class="material-icons" aria-hidden="true">content_copy</span>
    Get NYX Script
  </button>
</div>

<script>
'use strict';

// ===== VARIABLES GLOBALES =====
const loader = document.getElementById('loaderScreen');
const main = document.getElementById('main');
const musicBtn = document.getElementById('musicBtn');
const musicControls = document.getElementById('musicControls');
const volumeSlider = document.getElementById('volumeSlider');
const backgroundMusic = document.getElementById('backgroundMusic');
const onlineCount = document.getElementById('onlineCount');
const viewCount = document.getElementById('viewCount');
const progressBar = document.getElementById('progressBar');
const percentage = document.getElementById('percentage');

// Botones de redes sociales
const discordBtn = document.getElementById('discordBtn');
const instagramBtn = document.getElementById('instagramBtn');
const tiktokBtn = document.getElementById('tiktokBtn');
const scriptBtn = document.getElementById('scriptBtn');

let isMusicPlaying = false;
let loadProgress = 0;
let views = 0;
let onlineMembers = 0;
let loadingInterval = null;

// Discord Server ID y API URL
const DISCORD_SERVER_ID = "1449237072048160831";
const DISCORD_WIDGET_URL = "https://discord.com/api/guilds/1449237072048160831/widget.json";

// ===== FUNCIONES DE ESTAD√çSTICAS =====
function loadStats() {
  console.log("üìä Cargando estad√≠sticas...");
  
  try {
    // RESET DE VISITAS: Cambiar a 0 siempre
    views = 0;
    localStorage.setItem('globalViews', '0');
    
    // Mostrar valores inmediatamente
    viewCount.textContent = formatNumber(views);
    onlineCount.textContent = "0";
    
    console.log("üìä Estad√≠sticas cargadas:", { views });
    
    // Obtener miembros online reales de Discord
    fetchDiscordMembers();
    
  } catch (error) {
    console.error("Error cargando estad√≠sticas:", error);
    views = 0;
    onlineMembers = 0;
    viewCount.textContent = "0";
    onlineCount.textContent = "0";
  }
}

// Funci√≥n para obtener miembros online REALES de Discord usando Widget API
async function fetchDiscordMembers() {
  try {
    console.log("üîÑ Obteniendo miembros REALES de Discord...");
    
    // Usar la API de widgets de Discord para obtener datos reales
    const response = await fetch(DISCORD_WIDGET_URL);
    
    if (response.ok) {
      const data = await response.json();
      console.log("‚úÖ Datos REALES de Discord Widget:", data);
      
      // Verificar si hay miembros en el widget
      if (data.members && Array.isArray(data.members)) {
        // Contar miembros √∫nicos que est√°n online
        const uniqueMembers = [];
        data.members.forEach(member => {
          if (member.status === 'online' || member.status === 'idle' || member.status === 'dnd') {
            // Evitar duplicados
            if (!uniqueMembers.includes(member.id)) {
              uniqueMembers.push(member.id);
            }
          }
        });
        
        onlineMembers = uniqueMembers.length;
        console.log(`‚úÖ Miembros online reales: ${onlineMembers}`);
        
        // Actualizar contador con animaci√≥n
        animateOnlineCounter(onlineMembers);
        
      } else {
        console.warn("‚ö†Ô∏è No se encontraron miembros en el widget");
        onlineMembers = 0;
        onlineCount.textContent = "0";
      }
      
    } else {
      console.warn("‚ö†Ô∏è No se pudo obtener el widget de Discord (status:", response.status, ")");
      onlineMembers = 0;
      onlineCount.textContent = "0";
    }
    
  } catch (error) {
    console.error("‚ùå Error obteniendo miembros de Discord:", error);
    onlineMembers = 0;
    onlineCount.textContent = "0";
  }
}

// Funci√≥n para animar el contador de miembros online
function animateOnlineCounter(target) {
  const current = parseInt(onlineCount.textContent) || 0;
  if (current === target) return;
  
  const increment = target > current ? 1 : -1;
  const stepTime = 50; // M√°s r√°pido
  let value = current;
  
  const timer = setInterval(() => {
    value += increment;
    onlineCount.textContent = formatNumber(value);
    
    if (value === target) {
      clearInterval(timer);
      console.log(`‚úÖ Contador actualizado a: ${target} miembros`);
    }
  }, stepTime);
}

// Funci√≥n para incrementar visitas (ahora siempre empieza en 0)
function saveViews() {
  // Siempre incrementar desde 0
  views++;
  try {
    localStorage.setItem('globalViews', views.toString());
    viewCount.textContent = formatNumber(views);
    console.log("üëÅÔ∏è Vista registrada. Total:", views);
  } catch (error) {
    console.error("Error guardando vistas:", error);
  }
}

function formatNumber(num) {
  if (num >= 1000000) {
    return (num / 1000000).toFixed(1) + 'M';
  }
  if (num >= 1000) {
    return (num / 1000).toFixed(1) + 'K';
  }
  return num.toString();
}

// ===== PANTALLA DE CARGA =====
function startLoading() {
  console.log("üöÄ Iniciando carga del perfil...");
  
  // Cargar estad√≠sticas primero
  loadStats();
  
  // Iniciar animaci√≥n de progreso
  loadingInterval = setInterval(() => {
    loadProgress += Math.random() * 10 + 5;
    
    if (loadProgress >= 100) {
      loadProgress = 100;
      clearInterval(loadingInterval);
      completeLoading();
    }
    
    progressBar.style.width = loadProgress + '%';
    percentage.textContent = Math.floor(loadProgress) + '%';
  }, 120);
}

function completeLoading() {
  console.log("‚úÖ Carga completada al 100%");
  
  // Incrementar vista
  saveViews();
  
  // Transici√≥n suave
  setTimeout(() => {
    loader.style.opacity = '0';
    
    setTimeout(() => {
      loader.style.display = 'none';
      main.classList.add('show');
      showNotification(`üëã ¬°Bienvenido! Visita ${formatNumber(views)}`, 'info');
    }, 800);
  }, 500);
}

// ===== SISTEMA DE M√öSICA =====
function initMusicSystem() {
  console.log("üéµ Inicializando sistema de m√∫sica...");
  
  // Configurar volumen inicial
  const savedVolume = localStorage.getItem('musicVolume') || 50;
  volumeSlider.value = savedVolume;
  backgroundMusic.volume = savedVolume / 100;
  
  // Cargar estado de m√∫sica
  const savedMusicState = localStorage.getItem('musicPlaying') === 'true';
  
  // Event listeners
  volumeSlider.addEventListener('input', function() {
    const volume = this.value / 100;
    backgroundMusic.volume = volume;
    localStorage.setItem('musicVolume', this.value);
  });
  
  musicBtn.addEventListener('click', function() {
    if (isMusicPlaying) {
      pauseMusic();
    } else {
      startMusic();
    }
  });
  
  // Mostrar/ocultar controles
  musicBtn.addEventListener('mouseenter', function() {
    musicControls.classList.add('show');
  });
  
  musicControls.addEventListener('mouseleave', function() {
    if (!musicControls.matches(':hover')) {
      musicControls.classList.remove('show');
    }
  });
  
  // Si estaba reproduci√©ndose antes, intentar reanudar
  if (savedMusicState) {
    setTimeout(() => {
      startMusic();
    }, 1000);
  }
  
  console.log("üéµ Sistema de m√∫sica listo");
}

function startMusic() {
  console.log("‚ñ∂Ô∏è Intentando reproducir m√∫sica...");
  
  try {
    // Intentar reproducir
    backgroundMusic.play().then(() => {
      isMusicPlaying = true;
      musicBtn.classList.add('playing');
      musicBtn.querySelector('.material-icons').textContent = 'music_off';
      localStorage.setItem('musicPlaying', 'true');
      showNotification('üéµ ONEFOUR & Nemzzz - SPINNIN reproduci√©ndose', 'info');
    }).catch(error => {
      console.log("‚ùå Error reproduciendo m√∫sica:", error);
      showNotification('üîá Haz clic en la p√°gina para activar audio', 'error');
      
      // Pedir interacci√≥n del usuario
      const enableAudio = () => {
        backgroundMusic.play().then(() => {
          isMusicPlaying = true;
          musicBtn.classList.add('playing');
          musicBtn.querySelector('.material-icons').textContent = 'music_off';
          localStorage.setItem('musicPlaying', 'true');
        });
        document.removeEventListener('click', enableAudio);
      };
      
      document.addEventListener('click', enableAudio, { once: true });
    });
  } catch (error) {
    console.log("Error general:", error);
  }
}

function pauseMusic() {
  backgroundMusic.pause();
  isMusicPlaying = false;
  musicBtn.classList.remove('playing');
  musicBtn.querySelector('.material-icons').textContent = 'music_note';
  localStorage.setItem('musicPlaying', 'false');
  showNotification('‚è∏Ô∏è M√∫sica pausada', 'info');
}

// ===== NOTIFICACIONES =====
function showNotification(message, type = 'info') {
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  
  let icon = 'info';
  if (type === 'success') icon = 'check_circle';
  if (type === 'error') icon = 'error';
  if (type === 'info') icon = 'info';
  
  notification.innerHTML = `
    <span class="material-icons">${icon}</span>
    <span>${message}</span>
  `;
  
  document.body.appendChild(notification);
  
  setTimeout(() => {
    notification.classList.add('show');
  }, 10);
  
  setTimeout(() => {
    notification.classList.remove('show');
    setTimeout(() => {
      notification.remove();
    }, 300);
  }, 3000);
}

// ===== REDES SOCIALES =====
discordBtn.addEventListener('click', function(e) {
  e.preventDefault();
  window.open('https://discord.gg/F3SDzkZa6U', '_blank', 'noopener,noreferrer');
  showNotification('Abriendo Discord...', 'info');
});

instagramBtn.addEventListener('click', function(e) {
  e.preventDefault();
  window.open('https://www.instagram.com/gzbriel_23/', '_blank', 'noopener,noreferrer');
  showNotification('Abriendo Instagram...', 'info');
});

tiktokBtn.addEventListener('click', function(e) {
  e.preventDefault();
  window.open('https://www.tiktok.com/@gxbriel51x?_r=1&_t=ZS-92pyVA67Lnu', '_blank', 'noopener,noreferrer');
  showNotification('Abriendo TikTok...', 'info');
});

// ===== COPIAR SCRIPT =====
scriptBtn.addEventListener('click', async function(e) {
  e.preventDefault();
  const script = "loadstring(game:HttpGet('https://raw.githubusercontent.com/TexaThebardo/NYXEXOTIC/refs/heads/main/UpdateFix.lua'))()";
  
  try {
    await navigator.clipboard.writeText(script);
    
    const originalHTML = scriptBtn.innerHTML;
    scriptBtn.innerHTML = '<span class="material-icons">check</span> ¬°Copiado!';
    scriptBtn.style.background = 'linear-gradient(135deg, #00b09b, #96c93d)';
    
    showNotification('‚úÖ Script copiado al portapapeles', 'success');
    
    setTimeout(() => {
      scriptBtn.innerHTML = originalHTML;
      scriptBtn.style.background = 'linear-gradient(135deg, var(--primary), #7a0018)';
    }, 2000);
    
  } catch (err) {
    // M√©todo alternativo
    const textArea = document.createElement('textarea');
    textArea.value = script;
    document.body.appendChild(textArea);
    textArea.select();
    
    try {
      const successful = document.execCommand('copy');
      if (successful) {
        showNotification('‚úÖ Script copiado', 'success');
      } else {
        showNotification('‚ùå Error al copiar', 'error');
      }
    } catch (copyErr) {
      showNotification('‚ùå No se pudo copiar', 'error');
    }
    
    document.body.removeChild(textArea);
  }
});

// ===== FONDO DE PART√çCULAS =====
const canvas = document.getElementById('bg');
const ctx = canvas.getContext('2d');
let particles = [];

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  initParticles();
}

function initParticles() {
  particles = [];
  const count = Math.min(60, Math.floor((canvas.width * canvas.height) / 15000));
  
  for (let i = 0; i < count; i++) {
    particles.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      size: Math.random() * 2 + 1,
      speedX: (Math.random() - 0.5) * 0.5,
      speedY: (Math.random() - 0.5) * 0.5,
      color: `rgba(255, 0, 60, ${Math.random() * 0.5 + 0.3})`
    });
  }
}

function animateParticles() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  particles.forEach(p => {
    p.x += p.speedX;
    p.y += p.speedY;
    
    if (p.x < 0 || p.x > canvas.width) p.speedX *= -1;
    if (p.y < 0 || p.y > canvas.height) p.speedY *= -1;
    
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
    ctx.fillStyle = p.color;
    ctx.fill();
    
    particles.forEach(other => {
      const dx = p.x - other.x;
      const dy = p.y - other.y;
      const distance = Math.sqrt(dx * dx + dy * dy);
      
      if (distance < 100) {
        ctx.beginPath();
        ctx.strokeStyle = `rgba(255, 0, 60, ${0.2 * (1 - distance/100)})`;
        ctx.lineWidth = 0.5;
        ctx.moveTo(p.x, p.y);
        ctx.lineTo(other.x, other.y);
        ctx.stroke();
      }
    });
  });
  
  requestAnimationFrame(animateParticles);
}

// ===== INICIALIZACI√ìN =====
window.addEventListener('load', function() {
  console.log('üöÄ Inicializando perfil...');
  
  // Inicializar canvas
  resizeCanvas();
  animateParticles();
  
  // Iniciar sistemas
  startLoading();
  initMusicSystem();
  
  console.log('‚úÖ Script de inicializaci√≥n ejecutado');
});

window.addEventListener('resize', resizeCanvas);

// Manejar pesta√±a oculta
document.addEventListener('visibilitychange', () => {
  if (document.hidden && isMusicPlaying) {
    backgroundMusic.pause();
  } else if (!document.hidden && isMusicPlaying && backgroundMusic.paused) {
    backgroundMusic.play().catch(e => console.log("Error reanudando m√∫sica:", e));
  }
});

// Atajos de teclado
document.addEventListener('keydown', (e) => {
  if (e.key === 'm' || e.key === 'M') {
    musicBtn.click();
  }
  if (e.key === 'v' || e.key === 'V') {
    musicControls.classList.toggle('show');
  }
  if (e.key === '1') discordBtn.click();
  if (e.key === '2') instagramBtn.click();
  if (e.key === '3') tiktokBtn.click();
  if (e.key === '4') scriptBtn.click();
});

// Activar m√∫sica con primer clic
document.addEventListener('click', function initAudioOnce() {
  if (!isMusicPlaying) {
    startMusic();
  }
  document.removeEventListener('click', initAudioOnce);
}, { once: true });

// Actualizar miembros online cada 60 segundos
setInterval(() => {
  console.log("üîÑ Actualizando miembros online...");
  fetchDiscordMembers();
}, 60000);

// Funci√≥n para forzar actualizaci√≥n manual (puedes a√±adir un bot√≥n si quieres)
function forceUpdateDiscordStats() {
  showNotification("üîÑ Actualizando estad√≠sticas de Discord...", "info");
  fetchDiscordMembers();
}

// Exponer funci√≥n global para depuraci√≥n
window.updateDiscordStats = forceUpdateDiscordStats;

// Asegurar que la carga siempre termine (fallback)
setTimeout(() => {
  if (loadProgress < 100 && loadingInterval) {
    console.log("‚ö†Ô∏è Forzando finalizaci√≥n de carga...");
    clearInterval(loadingInterval);
    completeLoading();
  }
}, 5000); // 5 segundos m√°ximo
</script>
</body>
</html>
